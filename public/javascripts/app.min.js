"use strict";$(function(){var t=$("#btn-skills-more"),e=function(e){t.toggleClass("skills-more"),t.toggleClass("skills-less")};$(document).on("click","#btn-skills-more",e)}),$(function(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if($(".active").removeClass("active"),t.parent().addClass("active"),t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html, body").animate({scrollTop:t.offset().top-20},600),!1}})}),$(function(){var t,e,n;$("#resume-modal").on("show.bs.modal",function(i){e=$("#modal-content"),n=$("#modal-body");var a=$(i.relatedTarget).data("panel-type");a!==t&&(e.addClass("panel-"+a),e.removeClass("panel-"+t),t=a);var o=$(i.relatedTarget).data("modal-data");o.title?e.find("#title").text(o.title).show():e.find("#title").hide(),o.company?n.find("#company").text(o.company.name).show():n.find("#company").hide(),o.description?n.find("#description").text(o.description).show():n.find("#description").hide(),o.start?n.find("#start").text(moment(o.start).format("MMMM YYYY")).show():n.find("#start").hide(),o.end?n.find("#end").text(moment(o.end).format("MMMM YYYY")).show():n.find("#end").hide()})}),$("body").on("hidden.bs.modal",".modal",function(){$(this).removeData("bs.modal")}),$(function(){var t,e,n,i;$("#profile .read-more").on("click",function(){return i=0,t=$(this),e=t.parent(),n=e.find("p"),n.each(function(){i+=$(this).outerHeight()}),e.css({height:e.height(),"max-height":9999}).animate({height:i},400),t.css({display:"none"}),!1})}),$(function(){function t(t,n){var i,a={},o=t.attr("id"),s=t.data("section");return o&&(a._id=o),s&&(a.section=s),$(t).find(".resume-form-field").each(function(){i=$(this)[0];var t=i.dataset.prop,o=i.innerHTML||i.checked||i.value;n?e(a,t,o):a[t]=o}),JSON.stringify(a)}function e(t,e,n){for(var i=t,a=e.split("."),o=a.length,s=0;s<o-1;s++){var r=a[s];i[r]||(i[r]={}),i=i[r]}return i[a[o-1]]=n,i}var n=function(e){e.preventDefault();var n,i=$(this).closest("form"),a=i.attr("id");a?confirm("Vil du gemme Ã¦ndringerne?")&&(n=t(i,!0),$.ajax({method:"PUT",url:"/admin",data:n,contentType:"application/json"}).done(function(t,e,n){toastr.success(t)}).fail(function(t,e,n){toastr.error(t.responseText)})):confirm("Vil du gemme elementet?")&&(n=t(i,!1),$.ajax({method:"POST",url:"/admin",data:n,contentType:"application/json"}).done(function(t,e,n){toastr.success(t)}).fail(function(t,e,n){toastr.error(t.responseText)}))},i=function(t){t.preventDefault();var e=$(this),n=e.closest("form"),i={};i.section=n.data("section"),i._id=n.attr("id"),i._id?confirm("Vil du slette elementet?")&&$.ajax({method:"DELETE",url:"/admin",data:JSON.stringify(i),contentType:"application/json"}).done(function(t,n,i){a(e,$(this)),toastr.success(t)}).fail(function(t,e,n){toastr.error(t.responseText)}):a(e,$(this))},a=function(t,e){t.closest(".admin-element").hide("normal",function(){e.remove()})},o=function(t){t.preventDefault();var e=$(this).closest(".add-new-element"),n=e.next().find("form"),i=n.data("section");$.get("/templates/"+i).then(function(t){$(t).hide().prependTo(".element-list-"+i).fadeIn("normal")})};$(document).on("click",".btn-admin-save",n),$(document).on("click",".btn-admin-delete",i),$(document).on("click",".btn-admin-addnew",o)}),$(function(){$("#admin-tabs a").click(function(t){t.preventDefault(),$(this).tab("show")})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImJ0bk1vcmUiLCJza2lsbHNDbGlja0hhbmRsZXIiLCJlIiwidG9nZ2xlQ2xhc3MiLCJkb2N1bWVudCIsIm9uIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInJlcGxhY2UiLCJ0aGlzIiwiaG9zdG5hbWUiLCJ0YXJnZXQiLCJoYXNoIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnQiLCJhZGRDbGFzcyIsImxlbmd0aCIsInNsaWNlIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsInBhbmVsVHlwZSIsIm1vZGFsQ29udGVudCIsIm1vZGFsQm9keSIsInR5cGUiLCJyZWxhdGVkVGFyZ2V0IiwiZGF0YSIsImV4cCIsInRpdGxlIiwiZmluZCIsInRleHQiLCJzaG93IiwiaGlkZSIsImNvbXBhbnkiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJzdGFydCIsIm1vbWVudCIsImZvcm1hdCIsImVuZCIsInJlbW92ZURhdGEiLCIkZWwiLCIkcCIsIiRwcyIsInRvdGFsSGVpZ2h0IiwiZWFjaCIsIm91dGVySGVpZ2h0IiwiY3NzIiwiaGVpZ2h0IiwibWF4LWhlaWdodCIsImRpc3BsYXkiLCJnZXREYXRhIiwiZm9ybSIsImV4cGFuZFByb3BzIiwiaXRlbSIsImlkIiwiYXR0ciIsInNlY3Rpb24iLCJfaWQiLCJwYXRoIiwiZGF0YXNldCIsInByb3AiLCJ2YWwiLCJpbm5lckhUTUwiLCJjaGVja2VkIiwidmFsdWUiLCJzZXQiLCJKU09OIiwic3RyaW5naWZ5Iiwib2JqIiwic2NoZW1hIiwiYXJyIiwic3BsaXQiLCJsZW4iLCJpIiwiZWxlbSIsImJ0blNhdmVIYW5kbGVyIiwicHJldmVudERlZmF1bHQiLCJjbG9zZXN0IiwiY29uZmlybSIsImFqYXgiLCJtZXRob2QiLCJ1cmwiLCJjb250ZW50VHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJ0b2FzdHIiLCJzdWNjZXNzIiwiZmFpbCIsImVycm9yVGhyb3duIiwiZXJyb3IiLCJyZXNwb25zZVRleHQiLCJidG5EZWxldGVIYW5kbGVyIiwiYnRuIiwicmVtb3ZlRWxlbWVudCIsImNvbnRleHQiLCJyZW1vdmUiLCJidG5BZGROZXdIYW5kbGVyIiwibmV4dCIsImdldCIsInRoZW4iLCJodG1sIiwicHJlcGVuZFRvIiwiZmFkZUluIiwiY2xpY2siLCJ0YWIiXSwibWFwcGluZ3MiOiJBQUFBLFlBR0FBLEdBQUEsV0FDQSxHQUFBQyxHQUFBRCxFQUFBLG9CQUVBRSxFQUFBLFNBQUFDLEdBQ0FGLEVBQUFHLFlBQUEsZUFDQUgsRUFBQUcsWUFBQSxlQUdBSixHQUFBSyxVQUFBQyxHQUFBLFFBQUEsbUJBQUFKLEtBS0FGLEVBQUEsV0FDQUEsRUFBQSxnQ0FBQU0sR0FBQSxRQUFBLFdBQ0EsR0FBQUMsU0FBQUMsU0FBQUMsUUFBQSxNQUFBLEtBQUFDLEtBQUFGLFNBQUFDLFFBQUEsTUFBQSxLQUFBRixTQUFBSSxVQUFBRCxLQUFBQyxTQUFBLENBQ0EsR0FBQUMsR0FBQVosRUFBQVUsS0FBQUcsS0FPQSxJQUpBYixFQUFBLFdBQUFjLFlBQUEsVUFDQUYsRUFBQUcsU0FBQUMsU0FBQSxVQUVBSixFQUFBQSxFQUFBSyxPQUFBTCxFQUFBWixFQUFBLFNBQUFVLEtBQUFHLEtBQUFLLE1BQUEsR0FBQSxLQUNBTixFQUFBSyxPQUlBLE1BSEFqQixHQUFBLGNBQUFtQixTQUNBQyxVQUFBUixFQUFBUyxTQUFBQyxJQUFBLElBQ0EsTUFDQSxPQVFBdEIsRUFBQSxXQUVBLEdBQUF1QixHQUNBQyxFQUNBQyxDQUdBekIsR0FBQSxpQkFBQU0sR0FBQSxnQkFBQSxTQUFBSCxHQUVBcUIsRUFBQXhCLEVBQUEsa0JBQ0F5QixFQUFBekIsRUFBQSxjQUVBLElBQUEwQixHQUFBMUIsRUFBQUcsRUFBQXdCLGVBQUFDLEtBQUEsYUFDQUYsS0FBQUgsSUFDQUMsRUFBQVIsU0FBQSxTQUFBVSxHQUNBRixFQUFBVixZQUFBLFNBQUFTLEdBQ0FBLEVBQUFHLEVBSUEsSUFBQUcsR0FBQTdCLEVBQUFHLEVBQUF3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RixHQUdBL0YsRUFBQUssVUFBQUMsR0FBQSxRQUFBLG9CQUFBOEYsS0FLQXBHLEVBQUEsV0FDQUEsRUFBQSxpQkFBQTJHLE1BQUEsU0FBQXhHLEdBQ0FBLEVBQUE0RSxpQkFDQS9FLEVBQUFVLE1BQUFrRyxJQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLy8gc2tpbGxzIGNsaWNrIGhhbmRsZXJcbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG5Nb3JlID0gJCgnI2J0bi1za2lsbHMtbW9yZScpO1xuXG4gICAgdmFyIHNraWxsc0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGJ0bk1vcmUudG9nZ2xlQ2xhc3MoJ3NraWxscy1tb3JlJyk7XG4gICAgICAgIGJ0bk1vcmUudG9nZ2xlQ2xhc3MoJ3NraWxscy1sZXNzJyk7XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjYnRuLXNraWxscy1tb3JlJywgc2tpbGxzQ2xpY2tIYW5kbGVyKTtcbn0pO1xuXG5cbi8vIHNtb290aCBzY3JvbGwgdG8gYW5jaG9yXG4kKGZ1bmN0aW9uICgpIHtcbiAgICAkKCdhW2hyZWYqPVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XG5cbiAgICAgICAgICAgIC8vIHN3aXRjaCBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgICQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArICddJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wIC0gMjBcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuLy8gbW9kYWxcbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIHBhbmVsVHlwZTtcbiAgICB2YXIgbW9kYWxDb250ZW50O1xuICAgIHZhciBtb2RhbEJvZHk7XG5cbiAgICAvL3RyaWdnZXJlZCB3aGVuIG1vZGFsIGlzIGFib3V0IHRvIGJlIHNob3duXG4gICAgJCgnI3Jlc3VtZS1tb2RhbCcpLm9uKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICBtb2RhbENvbnRlbnQgPSAkKCcjbW9kYWwtY29udGVudCcpO1xuICAgICAgICBtb2RhbEJvZHkgPSAkKCcjbW9kYWwtYm9keScpO1xuXG4gICAgICAgIHZhciB0eXBlID0gJChlLnJlbGF0ZWRUYXJnZXQpLmRhdGEoJ3BhbmVsLXR5cGUnKTtcbiAgICAgICAgaWYgKHR5cGUgIT09IHBhbmVsVHlwZSkge1xuICAgICAgICAgICAgbW9kYWxDb250ZW50LmFkZENsYXNzKCdwYW5lbC0nICsgdHlwZSk7XG4gICAgICAgICAgICBtb2RhbENvbnRlbnQucmVtb3ZlQ2xhc3MoJ3BhbmVsLScgKyBwYW5lbFR5cGUpO1xuICAgICAgICAgICAgcGFuZWxUeXBlID0gdHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZ2V0IGRhdGEtaWQgYXR0cmlidXRlIG9mIHRoZSBjbGlja2VkIGVsZW1lbnRcbiAgICAgICAgdmFyIGV4cCA9ICQoZS5yZWxhdGVkVGFyZ2V0KS5kYXRhKCdtb2RhbC1kYXRhJyk7XG5cbiAgICAgICAgaWYgKGV4cC50aXRsZSkgbW9kYWxDb250ZW50LmZpbmQoJyN0aXRsZScpLnRleHQoZXhwLnRpdGxlKS5zaG93KCk7XG4gICAgICAgIGVsc2UgbW9kYWxDb250ZW50LmZpbmQoJyN0aXRsZScpLmhpZGUoKTtcblxuICAgICAgICAvL2lmIChleHAuZGVncmVlKSBtb2RhbENvbnRlbnQuZmluZCgnI2RlZ3JlZScpLnRleHQoZXhwLmRlZ3JlZSkuc2hvdygpO1xuICAgICAgICAvL2Vsc2UgbW9kYWxDb250ZW50LmZpbmQoJyNkZWdyZWUnKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKGV4cC5jb21wYW55KSBtb2RhbEJvZHkuZmluZCgnI2NvbXBhbnknKS50ZXh0KGV4cC5jb21wYW55Lm5hbWUpLnNob3coKTtcbiAgICAgICAgZWxzZSBtb2RhbEJvZHkuZmluZCgnI2NvbXBhbnknKS5oaWRlKCk7XG5cbiAgICAgICAgLy9pZiAoZXhwLnNjaG9vbCkgbW9kYWxCb2R5LmZpbmQoJyNzY2hvb2wnKS50ZXh0KGV4cC5zY2hvb2wpLnNob3coKTtcbiAgICAgICAgLy9lbHNlIG1vZGFsQm9keS5maW5kKCcjc2Nob29sJykuaGlkZSgpO1xuXG4gICAgICAgIGlmIChleHAuZGVzY3JpcHRpb24pIG1vZGFsQm9keS5maW5kKCcjZGVzY3JpcHRpb24nKS50ZXh0KGV4cC5kZXNjcmlwdGlvbikuc2hvdygpO1xuICAgICAgICBlbHNlIG1vZGFsQm9keS5maW5kKCcjZGVzY3JpcHRpb24nKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKGV4cC5zdGFydCkgbW9kYWxCb2R5LmZpbmQoJyNzdGFydCcpLnRleHQobW9tZW50KGV4cC5zdGFydCkuZm9ybWF0KCdNTU1NIFlZWVknKSkuc2hvdygpO1xuICAgICAgICBlbHNlIG1vZGFsQm9keS5maW5kKCcjc3RhcnQnKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKGV4cC5lbmQpIG1vZGFsQm9keS5maW5kKCcjZW5kJykudGV4dChtb21lbnQoZXhwLmVuZCkuZm9ybWF0KCdNTU1NIFlZWVknKSkuc2hvdygpO1xuICAgICAgICBlbHNlIG1vZGFsQm9keS5maW5kKCcjZW5kJykuaGlkZSgpO1xuICAgIH0pO1xufSk7XG5cblxuLy8ga2lsbCBtb2RhbCBvbiBjbG9zZVxuJCgnYm9keScpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCAnLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykucmVtb3ZlRGF0YSgnYnMubW9kYWwnKTtcbn0pO1xuXG5cbi8vICdyZWFkIG1vcmUnIHNsaWRlIGRvd25cbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyICRlbCwgJHAsICRwcywgJHVwLCB0b3RhbEhlaWdodDtcblxuICAgICQoXCIjcHJvZmlsZSAucmVhZC1tb3JlXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdG90YWxIZWlnaHQgPSAwO1xuXG4gICAgICAgICRlbCA9ICQodGhpcyk7XG4gICAgICAgICRwID0gJGVsLnBhcmVudCgpO1xuICAgICAgICAkcHMgPSAkcC5maW5kKFwicFwiKTtcblxuICAgICAgICAvLyBtZWFzdXJlIGhvdyB0YWxsIGluc2lkZSBzaG91bGQgYmUgYnkgYWRkaW5nIHRvZ2V0aGVyIGhlaWdodHMgb2YgYWxsIGluc2lkZSBwYXJhZ3JhcGhzIChleGNlcHQgcmVhZC1tb3JlIHBhcmFncmFwaClcbiAgICAgICAgJHBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdG90YWxIZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkcC5jc3Moe1xuICAgICAgICAgICAgICAgIC8vIFNldCBoZWlnaHQgdG8gcHJldmVudCBpbnN0YW50IGp1bXBkb3duIHdoZW4gbWF4IGhlaWdodCBpcyByZW1vdmVkXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogJHAuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6IDk5OTlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogdG90YWxIZWlnaHRcbiAgICAgICAgICAgIH0sIDQwMCk7XG5cbiAgICAgICAgLy8gZmFkZSBvdXQgcmVhZC1tb3JlXG4gICAgICAgICRlbC5jc3Moe1wiZGlzcGxheVwiOiBcIm5vbmVcIn0pO1xuXG4gICAgICAgIC8vIHByZXZlbnQganVtcC1kb3duXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbn0pO1xuXG5cbi8vIGFkbWluIGJ0bnNcbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGJ0blNhdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBkYXRhO1xuXG4gICAgICAgIC8vIHBhcmVudCBmb3JtXG4gICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XG5cbiAgICAgICAgLy8gZWxlbSBpZFxuICAgICAgICB2YXIgaWQgPSBmb3JtLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgLy8gY3JlYXRlIG5ldyBlbGVtXG4gICAgICAgIGlmICghaWQpwqB7XG4gICAgICAgICAgICBpZiAoY29uZmlybSgnVmlsIGR1IGdlbW1lIGVsZW1lbnRldD8nKSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgZGF0YVxuICAgICAgICAgICAgICAgIGRhdGEgPSBnZXREYXRhKGZvcm0sIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2FkbWluXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKGpxWEhSLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGV4aXN0aW5nXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1ZpbCBkdSBnZW1tZSDDpm5kcmluZ2VybmU/JykpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IGRhdGFcbiAgICAgICAgICAgICAgICBkYXRhID0gZ2V0RGF0YShmb3JtLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvYWRtaW5cIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoanFYSFIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKGZvcm0sIGV4cGFuZFByb3BzKSB7XG4gICAgICAgIHZhciBpdGVtO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICAgIHZhciBpZCA9IGZvcm0uYXR0cignaWQnKTtcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBmb3JtLmRhdGEoJ3NlY3Rpb24nKTtcblxuICAgICAgICBpZiAoaWQpIGRhdGEuX2lkID0gaWQ7XG4gICAgICAgIGlmIChzZWN0aW9uKSBkYXRhLnNlY3Rpb24gPSBzZWN0aW9uO1xuXG4gICAgICAgIC8vIGNvbGxlY3QgZGF0YSBmcm9tIGVhY2ggZmllbGRcbiAgICAgICAgJChmb3JtKS5maW5kKCcucmVzdW1lLWZvcm0tZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGl0ZW0gPSAkKHRoaXMpWzBdO1xuICAgICAgICAgICAgdmFyIHBhdGggPSBpdGVtLmRhdGFzZXQucHJvcDtcbiAgICAgICAgICAgIHZhciB2YWwgPSBpdGVtLmlubmVySFRNTCB8fCBpdGVtLmNoZWNrZWQgfHwgaXRlbS52YWx1ZTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIG5lc3RlZCBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIGlmIChleHBhbmRQcm9wcykge1xuICAgICAgICAgICAgICAgIHNldChkYXRhLCBwYXRoLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY3JlYXRlIGZsYXQgc3RydWN0dXJlXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhW3BhdGhdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldChvYmosIHBhdGgsIHZhbHVlKSB7XG4gICAgICAgIHZhciBzY2hlbWEgPSBvYmo7ICAvLyBhIG1vdmluZyByZWZlcmVuY2UgdG8gaW50ZXJuYWwgb2JqZWN0cyB3aXRoaW4gb2JqXG4gICAgICAgIHZhciBhcnIgPSBwYXRoLnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBhcnJbaV07XG4gICAgICAgICAgICBpZiAoIXNjaGVtYVtlbGVtXSkgc2NoZW1hW2VsZW1dID0ge307XG4gICAgICAgICAgICBzY2hlbWEgPSBzY2hlbWFbZWxlbV07XG4gICAgICAgIH1cbiAgICAgICAgc2NoZW1hW2FycltsZW4gLSAxXV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG5cbiAgICB2YXIgYnRuRGVsZXRlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcbiAgICAgICAgLy8gcGFyZW50IGZvcm1cbiAgICAgICAgdmFyIGZvcm0gPSBidG4uY2xvc2VzdCgnZm9ybScpO1xuXG4gICAgICAgIC8vIGdldCBzZWN0aW9uL2lkXG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGRhdGEuc2VjdGlvbiA9IGZvcm0uZGF0YSgnc2VjdGlvbicpO1xuICAgICAgICBkYXRhLl9pZCA9IGZvcm0uYXR0cignaWQnKTtcblxuICAgICAgICAvLyBuZXcgZWxlbWVudCAtIG5vdCBpbiBkYXRhYmFzZSB5ZXRcbiAgICAgICAgaWYgKCFkYXRhLl9pZCkge1xuICAgICAgICAgICAgcmVtb3ZlRWxlbWVudChidG4sICQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGh0dHAgREVMRVRFXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1ZpbCBkdSBzbGV0dGUgZWxlbWVudGV0PycpKSB7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2FkbWluXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudChidG4sICQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKGpxWEhSLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gcmVtb3ZlIGRvbSBlbGVtZW50XG4gICAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbihjb250ZXh0LCBlbGVtKSB7XG4gICAgICAgIGNvbnRleHQuY2xvc2VzdCgnLmFkbWluLWVsZW1lbnQnKS5oaWRlKCdub3JtYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGJ0bkFkZE5ld0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcykuY2xvc2VzdCgnLmFkZC1uZXctZWxlbWVudCcpO1xuXG4gICAgICAgIC8vIHBhcmVudCBmb3JtXG4gICAgICAgIHZhciBmb3JtID0gYnRuLm5leHQoKS5maW5kKCdmb3JtJyk7XG5cbiAgICAgICAgLy8gZ2V0IHNlY3Rpb25cbiAgICAgICAgdmFyIHNlY3Rpb24gPSBmb3JtLmRhdGEoJ3NlY3Rpb24nKTtcblxuICAgICAgICAvLyBnZXQgdGVtcGxhdGVcbiAgICAgICAgJC5nZXQoJy90ZW1wbGF0ZXMvJyArIHNlY3Rpb24pLnRoZW4oZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgIC8vIGluc2VydFxuICAgICAgICAgICAgJChodG1sKS5oaWRlKCkucHJlcGVuZFRvKFwiLmVsZW1lbnQtbGlzdC1cIiArIHNlY3Rpb24pLmZhZGVJbihcIm5vcm1hbFwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFkbWluIFNBVkUgZGF0YVxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnRuLWFkbWluLXNhdmUnLCBidG5TYXZlSGFuZGxlcik7XG5cbiAgICAvLyBhZG1pbiBERUxFVEUgZGF0YVxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnRuLWFkbWluLWRlbGV0ZScsIGJ0bkRlbGV0ZUhhbmRsZXIpO1xuXG4gICAgLy8gc2hvdyAnYWRkIG5ldycgdGVtcGxhdGVcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJ0bi1hZG1pbi1hZGRuZXcnLCBidG5BZGROZXdIYW5kbGVyKTtcbn0pO1xuXG5cbi8vIGFkbWluIHRhYnNcbiQoZnVuY3Rpb24gKCkge1xuICAgICQoJyNhZG1pbi10YWJzIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykudGFiKCdzaG93Jyk7XG4gICAgfSlcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
