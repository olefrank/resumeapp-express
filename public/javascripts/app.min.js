"use strict";$(function(){var t=[];t.push($("#btn-skills-more")),t.push($("#btn-skills-less"));var e=function(){t.forEach(function(t){t.toggleClass("hidden")})};t.forEach(function(t){t.on("click",e)})}),$(function(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if($(".active").removeClass("active"),t.parent().addClass("active"),t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html, body").animate({scrollTop:t.offset().top-20},600),!1}})}),$(function(){var t,e,n;$("#resume-modal").on("show.bs.modal",function(a){e=$("#modal-content"),n=$("#modal-body");var i=$(a.relatedTarget).data("panel-type");i!==t&&(e.addClass("panel-"+i),e.removeClass("panel-"+t),t=i);var o=$(a.relatedTarget).data("modal-data");o.title?e.find("#title").text(o.title).show():e.find("#title").hide(),o.company?n.find("#company").text(o.company.name).show():n.find("#company").hide(),o.description?n.find("#description").text(o.description).show():n.find("#description").hide(),o.start?n.find("#start").text(moment(o.start).format("MMMM YYYY")).show():n.find("#start").hide(),o.end?n.find("#end").text(moment(o.end).format("MMMM YYYY")).show():n.find("#end").hide()})}),$("body").on("hidden.bs.modal",".modal",function(){$(this).removeData("bs.modal")}),$(function(){var t,e,n,a;$("#profile .read-more").on("click",function(){return a=0,t=$(this),e=t.parent(),n=e.find("p"),n.each(function(){a+=$(this).outerHeight()}),e.css({height:e.height(),"max-height":9999}).animate({height:a},400),t.css({display:"none"}),!1})}),$(function(){function t(t,n){var a,i={_id:n,section:t},o="#"+n+"[data-section='"+t+"'] .resume-form-field";return $(o).each(function(){a=$(this)[0];var t=a.dataset.prop,n=a.innerHTML||a.checked||a.value;e(i,t,n)}),JSON.stringify(i)}function e(t,e,n){for(var a=t,i=e.split("."),o=i.length,s=0;s<o-1;s++){var r=i[s];a[r]||(a[r]={}),a=a[r]}return a[i[o-1]]=n,a}$(document).on("click",".btn-admin-save",function(e){e.preventDefault();var n={},a=$(this).closest("form"),i=a.data("section"),o=a.attr("id");n=t(i,o),0===Object.keys(n).length&&n.constructor===Object?toastr.error("Fejl! Ingen elementer fundet at opdatere"):confirm("Vil du Ã¦ndre elementet?")&&$.ajax({method:"PUT",url:"/admin",data:n,contentType:"application/json"}).done(function(t,e,n){toastr.success(t)}).fail(function(t,e,n){toastr.error(t.responseText)})})}),$(function(){function t(t,e){t.closest(".admin-element").hide("normal",function(){e.remove()})}$(document).on("click",".btn-admin-delete",function(e){e.preventDefault();var n=$(this),a=n.closest("form"),i={};i.section=a.data("section"),i._id=a.data("id"),i._id?confirm("Vil du slette elementet?")&&$.ajax({method:"DELETE",url:"/admin",data:JSON.stringify(i),contentType:"application/json"}).done(function(e,a,i){t(n,$(this)),toastr.success(e)}).fail(function(t,e,n){toastr.error(t.responseText)}):t(n,$(this))})}),$(function(){$(".btn-admin-addnew").on("click",function(t){t.preventDefault();var e=$(this).closest(".add-new-element"),n=e.next().find("form"),a=n.data("section");$.get("/templates/"+a).then(function(t){$(t).hide().prependTo(".element-list-"+a).fadeIn("normal")})})}),$(function(){$("#admin-tabs a").click(function(t){t.preventDefault(),$(this).tab("show")})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImJ0bkFyciIsInB1c2giLCJza2lsbHNDbGlja0hhbmRsZXIiLCJmb3JFYWNoIiwiYnRuIiwidG9nZ2xlQ2xhc3MiLCJvbiIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwidGhpcyIsImhvc3RuYW1lIiwidGFyZ2V0IiwiaGFzaCIsInJlbW92ZUNsYXNzIiwicGFyZW50IiwiYWRkQ2xhc3MiLCJsZW5ndGgiLCJzbGljZSIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJwYW5lbFR5cGUiLCJtb2RhbENvbnRlbnQiLCJtb2RhbEJvZHkiLCJlIiwidHlwZSIsInJlbGF0ZWRUYXJnZXQiLCJkYXRhIiwiZXhwIiwidGl0bGUiLCJmaW5kIiwidGV4dCIsInNob3ciLCJoaWRlIiwiY29tcGFueSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInN0YXJ0IiwibW9tZW50IiwiZm9ybWF0IiwiZW5kIiwicmVtb3ZlRGF0YSIsIiRlbCIsIiRwIiwiJHBzIiwidG90YWxIZWlnaHQiLCJlYWNoIiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJoZWlnaHQiLCJtYXgtaGVpZ2h0IiwiZGlzcGxheSIsImdldERhdGEiLCJzZWN0aW9uIiwiaWQiLCJpdGVtIiwiX2lkIiwicXVlcnkiLCJwYXRoIiwiZGF0YXNldCIsInByb3AiLCJ2YWwiLCJpbm5lckhUTUwiLCJjaGVja2VkIiwidmFsdWUiLCJzZXQiLCJKU09OIiwic3RyaW5naWZ5Iiwib2JqIiwic2NoZW1hIiwiYXJyIiwic3BsaXQiLCJsZW4iLCJpIiwiZWxlbSIsImRvY3VtZW50IiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiY2xvc2VzdCIsImF0dHIiLCJPYmplY3QiLCJrZXlzIiwiY29uc3RydWN0b3IiLCJ0b2FzdHIiLCJlcnJvciIsImNvbmZpcm0iLCJhamF4IiwibWV0aG9kIiwidXJsIiwiY29udGVudFR5cGUiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWEhSIiwic3VjY2VzcyIsImZhaWwiLCJlcnJvclRocm93biIsInJlc3BvbnNlVGV4dCIsInJlbW92ZUVsZW1lbnQiLCJjb250ZXh0IiwicmVtb3ZlIiwibmV4dCIsImdldCIsInRoZW4iLCJodG1sIiwicHJlcGVuZFRvIiwiZmFkZUluIiwiY2xpY2siLCJ0YWIiXSwibWFwcGluZ3MiOiJBQUFBLFlBR0FBLEdBQUEsV0FDQSxHQUFBQyxLQUNBQSxHQUFBQyxLQUFBRixFQUFBLHFCQUNBQyxFQUFBQyxLQUFBRixFQUFBLG9CQUNBLElBQUFHLEdBQUEsV0FDQUYsRUFBQUcsUUFBQSxTQUFBQyxHQUFBQSxFQUFBQyxZQUFBLFlBRUFMLEdBQUFHLFFBQUEsU0FBQUMsR0FBQUEsRUFBQUUsR0FBQSxRQUFBSixPQU1BSCxFQUFBLFdBQ0FBLEVBQUEsZ0NBQUFPLEdBQUEsUUFBQSxXQUNBLEdBQUFDLFNBQUFDLFNBQUFDLFFBQUEsTUFBQSxLQUFBQyxLQUFBRixTQUFBQyxRQUFBLE1BQUEsS0FBQUYsU0FBQUksVUFBQUQsS0FBQUMsU0FBQSxDQUNBLEdBQUFDLEdBQUFiLEVBQUFXLEtBQUFHLEtBT0EsSUFKQWQsRUFBQSxXQUFBZSxZQUFBLFVBQ0FGLEVBQUFHLFNBQUFDLFNBQUEsVUFFQUosRUFBQUEsRUFBQUssT0FBQUwsRUFBQWIsRUFBQSxTQUFBVyxLQUFBRyxLQUFBSyxNQUFBLEdBQUEsS0FDQU4sRUFBQUssT0FJQSxNQUhBbEIsR0FBQSxjQUFBb0IsU0FDQUMsVUFBQVIsRUFBQVMsU0FBQUMsSUFBQSxJQUNBLE1BQ0EsT0FTQXZCLEVBQUEsV0FFQSxHQUFBd0IsR0FDQUMsRUFDQUMsQ0FHQTFCLEdBQUEsaUJBQUFPLEdBQUEsZ0JBQUEsU0FBQW9CLEdBRUFGLEVBQUF6QixFQUFBLGtCQUNBMEIsRUFBQTFCLEVBQUEsY0FFQSxJQUFBNEIsR0FBQTVCLEVBQUEyQixFQUFBRSxlQUFBQyxLQUFBLGFBQ0FGLEtBQUFKLElBQ0FDLEVBQUFSLFNBQUEsU0FBQVcsR0FDQUgsRUFBQVYsWUFBQSxTQUFBUyxHQUNB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c2tpbGxzIGNsaWNrIGhhbmRsZXJcbiQoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJ0bkFyciA9IFtdO1xuICAgIGJ0bkFyci5wdXNoKCAkKCcjYnRuLXNraWxscy1tb3JlJykgKTtcbiAgICBidG5BcnIucHVzaCggJCgnI2J0bi1za2lsbHMtbGVzcycpICk7XG4gICAgdmFyIHNraWxsc0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBidG5BcnIuZm9yRWFjaCggZnVuY3Rpb24oYnRuKSB7IGJ0bi50b2dnbGVDbGFzcygnaGlkZGVuJykgfSApO1xuICAgIH07XG4gICAgYnRuQXJyLmZvckVhY2goIGZ1bmN0aW9uKGJ0bikgeyBidG4ub24oJ2NsaWNrJywgc2tpbGxzQ2xpY2tIYW5kbGVyKTsgfSApO1xufSk7XG5cblxuXG4vLyBzbW9vdGggc2Nyb2xsIHRvIGFuY2hvclxuJChmdW5jdGlvbigpIHtcbiAgICAkKCdhW2hyZWYqPVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sJycpID09IHRoaXMucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XG5cbiAgICAgICAgICAgIC8vIHN3aXRjaCBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgICQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0YXJnZXQucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArJ10nKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHRhcmdldC5vZmZzZXQoKS50b3AgLSAyMFxuICAgICAgICAgICAgICAgIH0sIDYwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuXG5cbi8vIG1vZGFsXG4kKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHBhbmVsVHlwZTtcbiAgICB2YXIgbW9kYWxDb250ZW50O1xuICAgIHZhciBtb2RhbEJvZHk7XG5cbiAgICAvL3RyaWdnZXJlZCB3aGVuIG1vZGFsIGlzIGFib3V0IHRvIGJlIHNob3duXG4gICAgJCgnI3Jlc3VtZS1tb2RhbCcpLm9uKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgIG1vZGFsQ29udGVudCA9ICQoJyNtb2RhbC1jb250ZW50Jyk7XG4gICAgICAgIG1vZGFsQm9keSA9ICQoJyNtb2RhbC1ib2R5Jyk7XG5cbiAgICAgICAgdmFyIHR5cGUgPSAkKGUucmVsYXRlZFRhcmdldCkuZGF0YSgncGFuZWwtdHlwZScpO1xuICAgICAgICBpZiAodHlwZSAhPT0gcGFuZWxUeXBlKSB7XG4gICAgICAgICAgICBtb2RhbENvbnRlbnQuYWRkQ2xhc3MoJ3BhbmVsLScgKyB0eXBlKTtcbiAgICAgICAgICAgIG1vZGFsQ29udGVudC5yZW1vdmVDbGFzcygncGFuZWwtJyArIHBhbmVsVHlwZSk7XG4gICAgICAgICAgICBwYW5lbFR5cGUgPSB0eXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9nZXQgZGF0YS1pZCBhdHRyaWJ1dGUgb2YgdGhlIGNsaWNrZWQgZWxlbWVudFxuICAgICAgICB2YXIgZXhwID0gJChlLnJlbGF0ZWRUYXJnZXQpLmRhdGEoJ21vZGFsLWRhdGEnKTtcblxuICAgICAgICBpZiAoZXhwLnRpdGxlKSBtb2RhbENvbnRlbnQuZmluZCgnI3RpdGxlJykudGV4dChleHAudGl0bGUpLnNob3coKTtcbiAgICAgICAgZWxzZSBtb2RhbENvbnRlbnQuZmluZCgnI3RpdGxlJykuaGlkZSgpO1xuXG4gICAgICAgIC8vaWYgKGV4cC5kZWdyZWUpIG1vZGFsQ29udGVudC5maW5kKCcjZGVncmVlJykudGV4dChleHAuZGVncmVlKS5zaG93KCk7XG4gICAgICAgIC8vZWxzZSBtb2RhbENvbnRlbnQuZmluZCgnI2RlZ3JlZScpLmhpZGUoKTtcblxuICAgICAgICBpZiAoZXhwLmNvbXBhbnkpIG1vZGFsQm9keS5maW5kKCcjY29tcGFueScpLnRleHQoZXhwLmNvbXBhbnkubmFtZSkuc2hvdygpO1xuICAgICAgICBlbHNlIG1vZGFsQm9keS5maW5kKCcjY29tcGFueScpLmhpZGUoKTtcblxuICAgICAgICAvL2lmIChleHAuc2Nob29sKSBtb2RhbEJvZHkuZmluZCgnI3NjaG9vbCcpLnRleHQoZXhwLnNjaG9vbCkuc2hvdygpO1xuICAgICAgICAvL2Vsc2UgbW9kYWxCb2R5LmZpbmQoJyNzY2hvb2wnKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKGV4cC5kZXNjcmlwdGlvbikgbW9kYWxCb2R5LmZpbmQoJyNkZXNjcmlwdGlvbicpLnRleHQoZXhwLmRlc2NyaXB0aW9uKS5zaG93KCk7XG4gICAgICAgIGVsc2UgbW9kYWxCb2R5LmZpbmQoJyNkZXNjcmlwdGlvbicpLmhpZGUoKTtcblxuICAgICAgICBpZiAoZXhwLnN0YXJ0KSBtb2RhbEJvZHkuZmluZCgnI3N0YXJ0JykudGV4dChtb21lbnQoZXhwLnN0YXJ0KS5mb3JtYXQoJ01NTU0gWVlZWScpKS5zaG93KCk7XG4gICAgICAgIGVsc2UgbW9kYWxCb2R5LmZpbmQoJyNzdGFydCcpLmhpZGUoKTtcblxuICAgICAgICBpZiAoZXhwLmVuZCkgbW9kYWxCb2R5LmZpbmQoJyNlbmQnKS50ZXh0KG1vbWVudChleHAuZW5kKS5mb3JtYXQoJ01NTU0gWVlZWScpKS5zaG93KCk7XG4gICAgICAgIGVsc2UgbW9kYWxCb2R5LmZpbmQoJyNlbmQnKS5oaWRlKCk7XG4gICAgfSk7XG59KTtcblxuXG5cbi8vIGtpbGwgbW9kYWwgb24gY2xvc2VcbiQoJ2JvZHknKS5vbignaGlkZGVuLmJzLm1vZGFsJywgJy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ2JzLm1vZGFsJyk7XG59KTtcblxuXG5cbi8vICdyZWFkIG1vcmUnIHNsaWRlIGRvd25cbiQoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgJGVsLCAkcCwgJHBzLCAkdXAsIHRvdGFsSGVpZ2h0O1xuXG4gICAgJChcIiNwcm9maWxlIC5yZWFkLW1vcmVcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRvdGFsSGVpZ2h0ID0gMDtcblxuICAgICAgICAkZWwgPSAkKHRoaXMpO1xuICAgICAgICAkcCAgPSAkZWwucGFyZW50KCk7XG4gICAgICAgICRwcyA9ICRwLmZpbmQoXCJwXCIpO1xuXG4gICAgICAgIC8vIG1lYXN1cmUgaG93IHRhbGwgaW5zaWRlIHNob3VsZCBiZSBieSBhZGRpbmcgdG9nZXRoZXIgaGVpZ2h0cyBvZiBhbGwgaW5zaWRlIHBhcmFncmFwaHMgKGV4Y2VwdCByZWFkLW1vcmUgcGFyYWdyYXBoKVxuICAgICAgICAkcHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRvdGFsSGVpZ2h0ICs9ICQodGhpcykub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHAuY3NzKHtcbiAgICAgICAgICAgICAgICAvLyBTZXQgaGVpZ2h0IHRvIHByZXZlbnQgaW5zdGFudCBqdW1wZG93biB3aGVuIG1heCBoZWlnaHQgaXMgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6ICRwLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIFwibWF4LWhlaWdodFwiOiA5OTk5XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IHRvdGFsSGVpZ2h0XG4gICAgICAgICAgICB9LDQwMCk7XG5cbiAgICAgICAgLy8gZmFkZSBvdXQgcmVhZC1tb3JlXG4gICAgICAgICRlbC5jc3Moe1wiZGlzcGxheVwiOiBcIm5vbmVcIn0pO1xuXG4gICAgICAgIC8vIHByZXZlbnQganVtcC1kb3duXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0pO1xuXG59KTtcblxuXG4vLyBhZG1pbiBQVVQgZGF0YVxuJChmdW5jdGlvbigpIHtcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJ0bi1hZG1pbi1zYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgICAvLyBwYXJlbnQgZm9ybVxuICAgICAgICB2YXIgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuXG4gICAgICAgIC8vIGdldCBzZWN0aW9uL2lkXG4gICAgICAgIHZhciBzZWN0aW9uID0gZm9ybS5kYXRhKCdzZWN0aW9uJyk7XG4gICAgICAgIHZhciBpZCA9IGZvcm0uYXR0cignaWQnKTtcblxuICAgICAgICAvLyBnZXQgZGF0YSBmcm9tIHJlbGV2YW50IGZpZWxkc1xuICAgICAgICBkYXRhID0gZ2V0RGF0YShzZWN0aW9uLCBpZCk7XG5cbiAgICAgICAgLy8gaWYgZGF0YSBpcyBlbXB0eVxuICAgICAgICBpZiAoIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCAmJiBkYXRhLmNvbnN0cnVjdG9yID09PSBPYmplY3QgKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ0ZlamwhIEluZ2VuIGVsZW1lbnRlciBmdW5kZXQgYXQgb3BkYXRlcmUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHBvc3QgZGF0YSB0byBlbmRwb2ludFxuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1ZpbCBkdSDDpm5kcmUgZWxlbWVudGV0PycpKSB7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2FkbWluXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihqcVhIUi5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKHNlY3Rpb24sIGlkKSB7XG4gICAgICAgIHZhciBkYXRhID0ge19pZDogaWQsIHNlY3Rpb246IHNlY3Rpb259O1xuICAgICAgICB2YXIgcXVlcnkgPSBcIiNcIiArIGlkICsgXCJbZGF0YS1zZWN0aW9uPSdcIiArIHNlY3Rpb24gKyBcIiddIC5yZXN1bWUtZm9ybS1maWVsZFwiO1xuICAgICAgICB2YXIgaXRlbTtcblxuICAgICAgICAvLyBjb2xsZWN0IGRhdGEgZnJvbSBlYWNoIGZpZWxkXG4gICAgICAgICQoIHF1ZXJ5ICkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGl0ZW0gPSAkKHRoaXMpWzBdO1xuICAgICAgICAgICAgdmFyIHBhdGggPSBpdGVtLmRhdGFzZXQucHJvcDtcbiAgICAgICAgICAgIHZhciB2YWwgPSBpdGVtLmlubmVySFRNTCB8fCBpdGVtLmNoZWNrZWQgfHwgaXRlbS52YWx1ZTtcbiAgICAgICAgICAgIHNldChkYXRhLCBwYXRoLCB2YWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0KG9iaiwgcGF0aCwgdmFsdWUpIHtcbiAgICAgICAgdmFyIHNjaGVtYSA9IG9iajsgIC8vIGEgbW92aW5nIHJlZmVyZW5jZSB0byBpbnRlcm5hbCBvYmplY3RzIHdpdGhpbiBvYmpcbiAgICAgICAgdmFyIGFyciA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgICAgICAgLy8gb2ZqOiB2aXJrZXIgaWtrZSAtIGh2b3Jmb3IgU08/XG4gICAgICAgIC8vYXJyLmZvckVhY2goZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAvLyAgICBpZiAoICFzY2hlbWFbZWxlbV0gKSB7XG4gICAgICAgIC8vICAgICAgICBzY2hlbWFbZWxlbV0gPSB7fTtcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvLyAgICBzY2hlbWEgPSBzY2hlbWFbZWxlbV07XG4gICAgICAgIC8vfSk7XG4gICAgICAgIC8vc2NoZW1hW2EgIHJyW2xlbiAtIDFdXSA9IHZhbHVlO1xuICAgICAgICAvL3JldHVybiBzY2hlbWE7XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbi0xOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gYXJyW2ldO1xuICAgICAgICAgICAgaWYoICFzY2hlbWFbZWxlbV0gKSBzY2hlbWFbZWxlbV0gPSB7fTtcbiAgICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYVtlbGVtXTtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWFbYXJyW2xlbi0xXV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59KTtcblxuXG4vLyBhZG1pbiBERUxFVEUgZGF0YVxuJChmdW5jdGlvbigpIHtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnRuLWFkbWluLWRlbGV0ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xuICAgICAgICAvLyBwYXJlbnQgZm9ybVxuICAgICAgICB2YXIgZm9ybSA9IGJ0bi5jbG9zZXN0KCdmb3JtJyk7XG5cbiAgICAgICAgLy8gZ2V0IHNlY3Rpb24vaWRcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZGF0YS5zZWN0aW9uID0gZm9ybS5kYXRhKCdzZWN0aW9uJyk7XG4gICAgICAgIGRhdGEuX2lkID0gZm9ybS5kYXRhKCdpZCcpO1xuXG4gICAgICAgIC8vIG5ldyBlbGVtZW50IC0gbm90IGluIGRhdGFiYXNlIHlldFxuICAgICAgICBpZiAoIWRhdGEuX2lkKSB7XG4gICAgICAgICAgICByZW1vdmVFbGVtZW50KGJ0biwgJCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaHR0cCBERUxFVEVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY29uZmlybSgnVmlsIGR1IHNsZXR0ZSBlbGVtZW50ZXQ/JykpIHtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvYWRtaW5cIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQoYnRuLCAkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKGpxWEhSLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBkb20gZWxlbWVudFxuICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoY29udGV4dCwgZWxlbSkge1xuICAgICAgICBjb250ZXh0LmNsb3Nlc3QoJy5hZG1pbi1lbGVtZW50JykuaGlkZSgnbm9ybWFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuXG4vLyBhZG1pbiBQT1NUIGRhdGFcbiQoZnVuY3Rpb24oKSB7XG5cbiAgICAkKCcuYnRuLWFkbWluLWFkZG5ldycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKS5jbG9zZXN0KCcuYWRkLW5ldy1lbGVtZW50Jyk7XG5cbiAgICAgICAgLy8gcGFyZW50IGZvcm1cbiAgICAgICAgdmFyIGZvcm0gPSBidG4ubmV4dCgpLmZpbmQoJ2Zvcm0nKTtcblxuICAgICAgICAvLyBnZXQgc2VjdGlvblxuICAgICAgICB2YXIgc2VjdGlvbiA9IGZvcm0uZGF0YSgnc2VjdGlvbicpO1xuXG4gICAgICAgIC8vIGdldCB0ZW1wbGF0ZVxuICAgICAgICAkLmdldCgnL3RlbXBsYXRlcy8nICsgc2VjdGlvbikudGhlbihmdW5jdGlvbihodG1sKSB7XG4gICAgICAgICAgICAvLyBpbnNlcnRcbiAgICAgICAgICAgICQoaHRtbCkuaGlkZSgpLnByZXBlbmRUbyhcIi5lbGVtZW50LWxpc3QtXCIgKyBzZWN0aW9uKS5mYWRlSW4oXCJub3JtYWxcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbi8vIGFkbWluIHRhYnNcbiQoZnVuY3Rpb24oKSB7XG5cbiAgICAkKCcjYWRtaW4tdGFicyBhJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnRhYignc2hvdycpO1xuICAgIH0pXG5cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
